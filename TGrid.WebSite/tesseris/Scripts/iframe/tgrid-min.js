function isNull(n){return n==null}function isNotNull(n){return n!=null}function isUndefined(n){return typeof n=="undefined"}function isNotUndefined(n){return typeof n!="undefined"}function isNoU(n){return isUndefined(n)||isNull(n)}function isNotNoU(n){return isNotUndefined(n)&&isNotNull(n)}function isFunction(n){return n&&{}.toString.call(n)==="[object Function]"}function isObservable(n){return n&&{}.toString.call(n)==="[object Function]"}function insertAfter(n,t){var i=n.parentNode,r=n.nextSibling;return r?i.insertBefore(t,r):i.appendChild(t)}function insertBefore(n,t){var i=n.parentNode;return i.insertBefore(t,n)}function getMemberValue(n,t){if(t==null||t.length==0)return n;for(var i=t.split("."),r=n;i.length>0;)r=r[i[0]],i.splice(0,1);return r}var TesserisPro;(function(n){(function(t){var i=function(){function i(){}return i.prototype.getTableElement=function(){var n=document.createElement("table");return n.className="tgrid-table",n},i.prototype.getElemntsSize=function(){return 0},i.prototype.getFirstVisibleItem=function(){return null},i.prototype.getFooterViewModel=function(){},i.prototype.getFilterPopupViewModel=function(){},i.prototype.updateTableHeadElement=function(){},i.prototype.updateTableBodyElement=function(){},i.prototype.updateTableFooterElement=function(){},i.prototype.updateTableFooterElementDefault=function(n,t,i){var e=n.currentPage-n.pageSlide,u,o,f,s,r;for(e<0&&(e=0),u=n.currentPage+n.pageSlide,o=Math.ceil(i/n.pageSize),u>=o&&(u=o-1),f=document.createElement("div"),f.setAttribute("class","tgird-pagination"),e>0&&(f.innerHTML+="<span class='tgird-page-number' onclick='TesserisPro.TGrid.Grid.getGridObject(event.target).selectPage("+(e-1).toString()+")' >...<\/span>"),r=e;r<=u;r++)f.innerHTML+=n.currentPage==r?"<span class='tgird-page-current'>"+(r+1)+"<\/span>":"<span class='tgird-page-number' onclick='TesserisPro.TGrid.Grid.getGridObject(event.target).selectPage("+r+")' >"+(r+1)+"<\/span>";for(u<o-1&&(f.innerHTML+="<span class='tgird-page-number' onclick='TesserisPro.TGrid.Grid.getGridObject(event.target).selectPage("+u.toString()+")' >...<\/span>"),s=t.getElementsByClassName("tgird-pagination"),r=0;r<s.length;r++)t.removeChild(s[r]);t.appendChild(f)},i.prototype.updateGroupedTableBodyElement=function(){},i.prototype.updateColumnWidth=function(n,t,i){for(var r,f,s=t.getElementsByTagName("th"),e=i.getElementsByTagName("tr"),o,u=0;u<e.length;u++)if(e.item(u).classList.contains("table-body-row")){o=e.item(u);break}for(r=0;r<n.columns.length&&n.columns[r].device.indexOf("desktop")==-1;)r++;for(u=0;u<s.length-1;u++){while(r<n.columns.length&&n.columns[r].device.indexOf("desktop")==-1)r++;if(r>=n.columns.length){r=n.columns.length-1;break}s.item(u+n.columns.length).setAttribute("width",n.columns[r].width);r++}for(r=0;r<n.columns.length&&n.columns[r].device.indexOf("desktop")==-1;)r++;if(o!=undefined)for(f=o.getElementsByTagName("td"),u=0;u<f.length-1;u++)if(!f.item(u).classList.contains("tgrid-table-indent-cell")){while(r<n.columns.length&&n.columns[r].device.indexOf("desktop")==-1)r++;if(r>=n.columns.length){r=n.columns.length-1;break}f.item(u).setAttribute("width",n.columns[r].width);r++}},i.prototype.hasDetails=function(n,t){if(n!=null&&n.length==1)if(t.showDetailFor.column==-1){if(t.detailsTemplateHtml!=null)return!0}else if(t.columns[t.showDetailFor.column].cellDetail!=null)return!0;return!1},i.prototype.updateTableDetailRow=function(){},i.prototype.updateMobileDetailRow=function(){},i.prototype.createDefaultHeader=function(n,t){var i=document.createElement("span"),r=document.createTextNode(t);i.appendChild(r);n.appendChild(i)},i.prototype.addGroupBy=function(n,i,r){var f,u,e,o,s;n.isEnableGrouping?(r.classList.add("show"),this.addGroupByElements(n,r),this.showGroupByElements(n,r,t.Grid.getGridObject(i)),f=document.createElement("div"),f.setAttribute("class","list-button-container"),u=document.createElement("ul"),u.setAttribute("class","group-by-ul"),e=document.createElement("a"),e.setAttribute("class","button-group-by"),o=this,e.onclick=function(){u.classList.contains("show")?u.classList.remove("show"):u.classList.add("show");o.hideElementOnClickAnywhereElse(u,"list-button-container")},f.appendChild(e),s=this.addListGroupByItems(n,u),this.showListGroupByItems(n,s,t.Grid.getGridObject(i)),f.appendChild(u),r.appendChild(f)):t.Grid.getGridObject(r).hideElement(r)},i.prototype.showNeededIntends=function(n,t,i){for(var f=t,u=n.getElementsByClassName("tgrid-table-indent-cell"),r=0;r<u.length;r++)i.hideElement(u[r]);for(u.length<t&&(f=u.length),r=0;r<f;r++)i.showTableCellElement(u[r])},i.prototype.addFilteringPopUp=function(){},i.prototype.defaultFiltringPopUp=function(n,i){var u=document.createElement("select"),r=document.createElement("option"),s,f,e,o;r.value=t.FilterCondition.Equals.toString();r.text="Equals";u.appendChild(r);r=document.createElement("option");r.value=t.FilterCondition.NotEquals.toString();r.text="Not equals";u.appendChild(r);i.appendChild(u);u.selectedIndex=1;s=document.createElement("input");s.setAttribute("value","c3");i.appendChild(s);i.innerHTML+="<br>";f=document.createElement("button");f.innerText="Apply";f.onclick=function(r){t.Grid.getGridObject(r.target).addFilter(n.filterPath,i.getElementsByTagName("input")[0].value,i.getElementsByTagName("select")[0].selectedIndex,i)};i.appendChild(f);e=document.createElement("button");e.innerText="Clear";e.onclick=function(r){t.Grid.getGridObject(r.target).clearFilter(n.filterPath,i)};i.appendChild(e);o=document.createElement("button");o.innerText="Close";o.onclick=function(n){t.Grid.getGridObject(n.target).hideElement(i)};i.appendChild(o)},i.prototype.addGroupByElements=function(n,i){for(var u,e,f,r=0;r<n.columns.length;r++)n.columns[r].groupMemberPath!=null&&(u=document.createElement("div"),n.columns[r].header!=null?n.columns[r].header.applyTemplate(u):(e=n.columns[r].member!=null?n.columns[r].member:n.columns[r].groupMemberPath,this.createDefaultHeader(u,e)),u.setAttribute("class","condition-group-by"),u["data-group-by"]=n.columns[r].groupMemberPath,f=document.createElement("input"),f.setAttribute("type","button"),f.setAttribute("class","delete-condition-group-by"),f.setAttribute("value","x"),f["data-delete-groupby"]=new t.SortDescriptor(n.columns[r].groupMemberPath,!0),f.onclick=function(n){var i=n.target["data-delete-groupby"];t.Grid.getGridObject(n.target).deleteGroupBy(i.path,i.asc)},u.appendChild(f),this.bindData(n,u),i.appendChild(u))},i.prototype.updateGroupByElements=function(n,i,r){if(n.isEnableGrouping){this.showGroupByElements(n,r,t.Grid.getGridObject(i));var u=r.getElementsByClassName("list-button-container");u[0].appendChild(this.showListGroupByItems(n,u[0].children[1],t.Grid.getGridObject(i)))}else t.Grid.getGridObject(r).hideElement(r)},i.prototype.createDefaultMobileTemplate=function(n,t){for(var r,u,f,i=0;i<t.columns.length;i++)t.columns[i].device.indexOf("mobile")!=-1&&(r=document.createElement("div"),u=document.createElement("span"),u.innerHTML=t.columns[i].member!=null?t.columns[i].member:t.columns[i].sortMemberPath!=null?t.columns[i].sortMemberPath:t.columns[i].groupMemberPath!=null?t.columns[i].groupMemberPath:"",f=document.createElement("span"),f.innerHTML=": ",r.appendChild(u),r.appendChild(f),n.appendChild(r));return n},i.prototype.showGroupByElements=function(n,t,i){for(var f,u=t.getElementsByClassName("condition-group-by"),r=0;r<u.length;r++)i.hideElement(u[r]);for(f=n.groupBySortDescriptor.length-1;f>-1;f--)for(r=0;r<u.length;r++)if(u[r]["data-group-by"]==n.groupBySortDescriptor[f].path){i.showDivElement(u[r]);t.insertBefore(u[r],t.firstChild);continue}},i.prototype.addListGroupByItems=function(n,i){for(var u,f,r=0;r<n.columns.length;r++)n.columns[r].groupMemberPath!=null&&(u=document.createElement("li"),u.onclick=function(n){for(var i=n.target;i&&i.nodeName!=="LI";)i=i.parentNode;t.Grid.getGridObject(n.target).addGroupBy(i["data-group-by-condition"],!0);i.parentNode.classList.remove("show");t.Grid.getGridObject(n.target).hideElement(i.parentNode)},n.columns[r].header!=null?n.columns[r].header.applyTemplate(u):(f=n.columns[r].member!=null?n.columns[r].member:n.columns[r].groupMemberPath,this.createDefaultHeader(u,f)),u["data-group-by-condition"]=n.columns[r].groupMemberPath,i.appendChild(u));return this.bindData(n,i),i},i.prototype.bindData=function(){},i.prototype.showListGroupByItems=function(n,t,i){for(var e,f,u=t.getElementsByTagName("li"),r=0;r<u.length;r++){for(u[r].getAttribute("style")=="display:block;"&&i.hideElement(u[r]),e=!0,f=0;f<n.groupBySortDescriptor.length;f++)if(n.groupBySortDescriptor[f].path==u[r]["data-group-by-condition"]){e=!1;continue}e&&i.showDivElement(u[r])}return t},i.prototype.buildGroupMobileHeaderRow=function(t,i){var r=document.createElement("div"),u=document.createElement("div"),f;for(r.classList.add("tgrid-mobile-group-header"),f=0;f<i.level;f++)r.innerHTML+="<div class='tgrid-mobile-group-indent-div'><\/div>";return t.isEnableCollapsing&&(r.onclick=i.collapse?function(t){n.TGrid.Grid.getGridObject(t.target).removeCollapsedFilters(i.filterDescriptor)}:function(t){n.TGrid.Grid.getGridObject(t.target).setCollapsedFilters(i.filterDescriptor)}),t.groupHeaderTemplate!=null?t.groupHeaderTemplate.applyTemplate(u):this.createDefaultGroupHeader(u),u.classList.add("tgrid-mobile-group-header-container"),this.bindMobileGroupHeader(r,i.value,u),r},i.prototype.bindMobileGroupHeader=function(n,t,i){n.appendChild(i)},i.prototype.createDefaultGroupHeader=function(){},i.prototype.addFilterButton=function(n,i,r,u,f){var e,o;n.isEnableFiltering&&(e=document.createElement("div"),e.classList.add("tgrid-filter-button"),o=this,function(u){e.onclick=function(f){for(var h,s=f.target.offsetLeft,e=0;e<u;e++)s+=parseInt(n.columns[e].width);if(h=i.getElementsByClassName("tgrid-table-indent-cell"),h.length>0)for(e=0;e<n.groupBySortDescriptor.length;e++)s+=20;o.hideElementOnClickAnywhereElse(r,"tgrid-filter-popup");r.hasAttribute("style")?r.removeAttribute("style"):t.Grid.getGridObject(f.target).showFilterBox(r,n.columns[u].filterMemberPath,s);f.cancelBubble=!0}}(f),u.appendChild(e))},i.prototype.updateMobileHeadElement=function(n,t,i,r){t.innerHTML!=null&&t.innerHTML!=""?this.updateMobileConditionList(n,t,r):this.createMobileConditionButton(n,t,i,r);this.updateMobileConditionShowList(n,t,r)},i.prototype.updateMobileItemsList=function(){},i.prototype.updateMobileConditionList=function(n,t,i){for(var u,e,f,o,r=0;r<n.columns.length;r++)if(n.isEnableFiltering&&(u=t.getElementsByClassName("mobile-filter-condition"),this.checkIsInArray(n.filterDescriptors,n.columns[r].filterMemberPath)?u[r].classList.contains("filtered")||u[r].classList.add("filtered"):u[r].classList.contains("filtered")&&u[r].classList.remove("filtered")),n.isEnableGrouping&&(e=t.getElementsByClassName("mobile-group-by-condition"),this.checkIsInArray(n.groupBySortDescriptor,n.columns[r].groupMemberPath)?e[r].classList.contains("active")||e[r].classList.add("active"):e[r].classList.contains("active")&&e[r].classList.remove("active")),i)if(f=t.getElementsByClassName("mobile-sort-condition"),n.sortDescriptor.path==n.columns[r].sortMemberPath){for(o=0;o<f.length;o++)f[o].classList.remove("asc"),f[o].classList.remove("desc");n.sortDescriptor.asc==!0?f[r].classList.contains("asc")||f[r].classList.add("asc"):f[r].classList.contains("desc")||f[r].classList.add("desc")}else u[r].classList.contains("asc")&&u[r].classList.remove("asc"),u[r].classList.contains("desc")&&u[r].classList.remove("desc")},i.prototype.updateMobileConditionShowList=function(n,t,i){var f=t.getElementsByClassName("mobile-condition-show-div"),r,u;f[0]!=undefined&&f[0].parentElement!=undefined&&(f[0].parentElement.innerHTML="");r=document.createElement("div");r.classList.add("mobile-condition-show-container");u=document.createElement("div");u.classList.add("mobile-condition-show-div");this.addMobileConditionShowListItems(n,u,t,i);r.appendChild(u);t.insertBefore(r,t.firstChild)},i.prototype.createMobileConditionButton=function(n,i,r,u){var f,e,o,s;(n.isEnableGrouping||n.isEnableFiltering||u)&&(f=document.createElement("div"),f.classList.add("mobile-list-button-container"),e=document.createElement("ul"),e.classList.add("mobile-condition-ul"),o=document.createElement("a"),o.classList.add("mobile-condition-button"),s=this,o.onclick=function(n){t.Grid.getGridObject(n.target).showHideListOnClick(n.target.nextElementSibling);s.hideElementOnClickAnywhereElse(e,"mobile-list-button-container")},f.appendChild(o),this.addMobileConditionListItems(n,e,r,u),f.appendChild(e),i.appendChild(f))},i.prototype.addMobileConditionListItems=function(n,i,r){for(var f,e,o,u=0;u<n.columns.length;u++)f=document.createElement("li"),e=document.createElement("span"),f.onclick=function(n){for(var i=n.target;i&&i.nodeName!=="LI";)i=i.parentNode;t.Grid.getGridObject(n.target).hideElement(i.parentNode);n.stopPropagation()},n.columns[u].header!=null?n.columns[u].header.applyTemplate(e):(o=n.columns[u].member!=null?n.columns[u].member:n.columns[u].groupMemberPath,this.createDefaultHeader(e,o)),f.appendChild(e),n.columns[u].groupMemberPath!=null&&f.appendChild(this.createMobileGroupByItem(n,u,!1)),n.columns[u].sortMemberPath!=null&&f.appendChild(this.createMobileSortItem(n,u,!1)),n.columns[u].filterMemberPath!=null&&f.appendChild(this.createMobileFilterItem(n,u,r,!1)),i.appendChild(f);return this.bindData(n,i),i},i.prototype.addMobileConditionShowListItems=function(n,t){for(var i,h,u,e,f,s,o=[],r=0;r<n.groupBySortDescriptor.length;r++)for(i=0;i<n.columns.length;i++)n.columns[i].groupMemberPath==n.groupBySortDescriptor[r].path&&(u=document.createElement("span"),t.appendChild(this.getMobileConditionListItem(n,u,null,!0,i)),o.push(n.columns[i]),i=n.columns.length);for(i=0;i<n.columns.length;i++){for(h=!1,r=0;r<o.length;r++)n.columns[i]==o[r]&&(h=!0,r=o.length);if(!h){for(u=document.createElement("span"),e=!1,n.columns[i].sortMemberPath==n.sortDescriptor.path&&(e=!0,f=document.createElement("span"),n.columns[i].header!=null?n.columns[i].header.applyTemplate(f):(s=n.columns[i].member!=null?n.columns[i].member:n.columns[i].groupMemberPath,this.createDefaultHeader(f,s)),u.appendChild(f),u.appendChild(this.createMobileSortItem(n,i,!0))),r=0;r<n.filterDescriptors.length;r++)n.columns[i].filterMemberPath==n.filterDescriptors[r].path&&(e||(f=document.createElement("span"),n.columns[i].header!=null?n.columns[i].header.applyTemplate(f):(s=n.columns[i].member!=null?n.columns[i].member:n.columns[i].groupMemberPath,this.createDefaultHeader(f,s)),u.appendChild(f)),e=!0,u.appendChild(this.createMobileFilterItem(n,i,null,!0)));e&&t.appendChild(u)}}return this.bindData(n,t),t},i.prototype.getMobileConditionListItem=function(n,t,i,r,u){var e=document.createElement("span"),o,f;for(n.columns[u].header!=null?n.columns[u].header.applyTemplate(e):(o=n.columns[u].member!=null?n.columns[u].member:n.columns[u].groupMemberPath,this.createDefaultHeader(e,o)),t.appendChild(e),t.appendChild(this.createMobileGroupByItem(n,u,r)),n.columns[u].sortMemberPath==n.sortDescriptor.path&&t.appendChild(this.createMobileSortItem(n,u,r)),f=0;f<n.filterDescriptors.length;f++)n.columns[u].filterMemberPath==n.filterDescriptors[f].path&&t.appendChild(this.createMobileFilterItem(n,u,i,r));return t},i.prototype.createMobileGroupByItem=function(n,i,r){var u=document.createElement("span"),f;if(u.classList.add("mobile-group-by-condition"),u["data-group-by-condition"]=n.columns[i].groupMemberPath,!r){for(f=0;f<n.groupBySortDescriptor.length;f++)n.groupBySortDescriptor[f].path==n.columns[i].groupMemberPath&&u.classList.add("active");u.onclick=function(i){for(var u=!0,r=0;r<n.groupBySortDescriptor.length;r++)n.groupBySortDescriptor[r].path==i.target["data-group-by-condition"]&&(u=!1,r=n.groupBySortDescriptor.length);u?(t.Grid.getGridObject(i.target).addGroupBy(i.target["data-group-by-condition"],!0),i.target.classList.add("active")):(t.Grid.getGridObject(i.target).deleteGroupBy(i.target["data-group-by-condition"],!0),i.target.classList.remove("active"))}}return u},i.prototype.createMobileSortItem=function(n,i,r){var u=document.createElement("span");return u.classList.add("mobile-sort-condition"),n.sortDescriptor.path==n.columns[i].sortMemberPath&&(n.sortDescriptor.asc?u.classList.add("asc"):u.classList.add("desc")),u["data-sort-condition"]=n.columns[i].sortMemberPath,r||(u.onclick=function(i){var f=!0,e,u,r;if(n.sortDescriptor.path==i.target["data-sort-condition"]&&(f=!1),e=i.target.parentElement.parentElement.getElementsByClassName("mobile-sort-condition"),f){for(u=i.target.parentElement.parentElement.getElementsByClassName("asc"),r=0;r<u.length;r++)u[r].classList.remove("asc");for(u=i.target.parentElement.parentElement.getElementsByClassName("desc"),r=0;r<u.length;r++)u[r].classList.remove("desc");t.Grid.getGridObject(i.target).mobileSortBy(i.target["data-sort-condition"],!0);i.target.classList.add("asc")}else n.sortDescriptor.asc?(t.Grid.getGridObject(i.target).mobileSortBy(i.target["data-sort-condition"],!1),i.target.classList.remove("asc"),i.target.classList.add("desc")):i.target.classList.contains("desc")?(t.Grid.getGridObject(i.target).mobileSortBy(i.target["data-sort-condition"],null),i.target.classList.remove("desc")):i.target.classList.add("asc")}),u},i.prototype.createMobileFilterItem=function(n,i,r,u){var f=document.createElement("span"),e;return f.classList.add("mobile-filter-condition"),f["data-filter-condition"]=n.columns[i].filterMemberPath,e=this.checkIsInArray(n.filterDescriptors,n.columns[i].sortMemberPath),e&&f.classList.add("filtered"),u||function(i){f.onclick=function(u){var f=u.target;document.onclick=function(n){for(var u=!1,i=n.target;!(i.tagName=="BODY"||u);)i=i.parentElement,i.classList.contains("tgrid-filter-popup")&&(u=!0);u||t.Grid.getGridObject(f).hideFilter(r)};t.Grid.getGridObject(f).showFilterBox(r,n.columns[i].filterMemberPath,0)}}(i),f},i.prototype.checkIsInArray=function(n,t){for(var r=!1,i=0;i<n.length;i++)n[i].path==t&&(r=!0,i=n.length);return r},i.prototype.hideElementOnClickAnywhereElse=function(n,t){document.onclick=function(i){for(var u=!1,r=i.target;!(r.tagName=="BODY"||u);)r=r.parentElement,r.classList.contains(t)&&(u=!0);u||(n.classList.remove("show"),n.removeAttribute("style"),document.onclick=null)}},i}();t.BaseHtmlProvider=i})(n.TGrid||(n.TGrid={}));var t=n.TGrid})(TesserisPro||(TesserisPro={})),function(n){(function(n){var t=function(){function t(t,i,r,u,f){this.path=t;this.value=i;this.condition=r;this.children=f!=undefined?f:[];this.operation=u!=undefined?u:n.FilterOperation.And}return t}();n.FilterDescriptor=t})(n.TGrid||(n.TGrid={}));var t=n.TGrid}(TesserisPro||(TesserisPro={})),function(n){(function(n){var t=function(){function n(n,t,i,r){this.collapse=i;this.value=n;this.level=t;this.filterDescriptor=r}return n}();n.GroupHeaderDescriptor=t})(n.TGrid||(n.TGrid={}));var t=n.TGrid}(TesserisPro||(TesserisPro={})),function(n){(function(n){var t=function(){function n(n,t,i,r){this.model=n;this.item=t;this.grid=i;this.isGroupHeader=r}return n.prototype.getCellDetailFor=function(n){this.grid.options.showDetailFor.column=n;this.grid.options.showDetailFor.isDetailColumn=!0},n}();n.ItemViewModel=t})(n.TGrid||(n.TGrid={}));var t=n.TGrid}(TesserisPro||(TesserisPro={})),function(n){(function(t){var e,o,s,h,r,u,i,f;(function(n){n[n.Knockout=0]="Knockout";n[n.Angular=1]="Angular"})(t.Framework||(t.Framework={}));e=t.Framework,function(n){n[n.None=0]="None";n[n.Single=1]="Single";n[n.Multi=2]="Multi"}(t.SelectionMode||(t.SelectionMode={}));o=t.SelectionMode,function(n){n[n.None=0]="None";n[n.Equals=1]="Equals";n[n.NotEquals=2]="NotEquals"}(t.FilterCondition||(t.FilterCondition={}));s=t.FilterCondition,function(n){n[n.And=0]="And";n[n.Or=1]="Or"}(t.FilterOperation||(t.FilterOperation={}));h=t.FilterOperation;r=function(){function n(){}return n}();t.ColumnInfo=r;u=function(){function n(){this.column=-1;this.item=null;this.isDetailColumn=!1}return n}();t.ShowDetail=u;i=function(){function n(n){this.content="";this.content=n.innerHTML==null?n.innerText:n.innerHTML}return n.prototype.applyTemplate=function(n){n.innerHTML=this.content!=null?this.content:""},n}();t.Template=i;f=function(){function t(n,t){this.columns=[];this.pageSlide=1;this.batchSize=10;this.firstLoadSize=20;this.currentPage=0;this.groupBySortDescriptor=[];this.filterDescriptors=[];this.selection=[];this.target=n;this.framework=t;this.initialize()}return t.prototype.isSelected=function(n){for(var t=0;t<this.selection.length;t++)if(this.selection[t]==n)return!0;return!1},t.prototype.initialize=function(){var w=this.target.getElementsByTagName("script")[0].innerHTML,o=document.createElement("div"),t,l,a,v,y,p,s;o.innerHTML=w;var k=o.getElementsByTagName("header"),d=o.getElementsByTagName("cell"),g=o.getElementsByTagName("celldetail"),f=o.getElementsByTagName("column");for(t=0;t<f.length;t++){var h=$(f[t]),c=h.find("header"),b=h.find("cell"),e=new r;e.member=f[t].attributes["data-g-member"]!=undefined?f[t].attributes["data-g-member"].nodeValue:null;e.header=c.length>0?new i(c[0]):null;e.cell=c.length>0?new i(b[0]):null;l=h.find("celldetail");e.cellDetail=l.length==1?new i(l[0]):null;e.sortMemberPath=f[t].attributes["data-g-sort-member"]!=undefined?f[t].attributes["data-g-sort-member"].nodeValue:e.member;e.groupMemberPath=f[t].attributes["data-g-group-member"]!==undefined?f[t].attributes["data-g-group-member"].nodeValue:e.member;e.width=f[t].attributes["data-g-width"]!=null?f[t].attributes["data-g-width"].nodeValue:100;e.device=f[t].attributes["data-g-views"]!=null?f[t].attributes["data-g-views"].nodeValue:"mobile,desktop";e.resizable=f[t].attributes["data-g-resizable"]!=undefined?f[t].attributes["data-g-resizable"].nodeValue=="false"?!1:!0:!0;e.filterMemberPath=f[t].attributes["data-g-filter-member"]!=undefined?f[t].attributes["data-g-filter-member"].nodeValue:null;this.columns.push(e)}this.sortDescriptor=new n.TGrid.SortDescriptor(null,null);a=o.getElementsByTagName("filterpopup");this.filterPopup=a.length==1?new i(a[0]):null;v=o.getElementsByTagName("mobile");this.mobileTemplateHtml=v.length==1?new i(v[0]):null;y=o.getElementsByTagName("groupheader");this.groupHeaderTemplate=y.length==1?new i(y[0]):null;p=o.getElementsByTagName("details");this.detailsTemplateHtml=p.length==1?new i(p[0]):null;this.showDetailFor=new u;s=o.getElementsByTagName("footer");this.tableFooterTemplate=s.length>0?new i(s[0]):null;this.tableFooterTemplate=s.length!=0?new i(s[0]):null},t}();t.Options=f})(n.TGrid||(n.TGrid={}));var t=n.TGrid}(TesserisPro||(TesserisPro={})),function(n){(function(n){var t=function(){function n(n,t){this.path=n;this.asc=t}return n}();n.SortDescriptor=t})(n.TGrid||(n.TGrid={}));var t=n.TGrid}(TesserisPro||(TesserisPro={})),function(n){(function(n){var t=function(){function t(n,t,i){var f=this,e,r,u,o;for(this.isPreloadingNext=!1,this.isPreloadingPrevious=!1,this.enablePreload=!0,n.grid=this,this.targetElement=n,this.options=t,this.collapsedFilterGroup=[],e=0;e<this.options.columns.length;e++)this.collapsedFilterGroup.push([]);this.itemProvider=i;this.htmlProvider=this.getHtmlProvider(this.options);this.footerViewModel=this.htmlProvider.getFooterViewModel();this.rootElement=document.createElement("div");this.rootElement.className="tgrid-root";this.groupByElement=document.createElement("div");this.groupByElement.className="group-by-container desktop";this.rootElement.appendChild(this.groupByElement);this.headerContainer=document.createElement("div");this.headerContainer.className="tgrid-tableheadercontainer desktop";r=document.createElement("table");r.className="tgrid-table";this.headerContainer.appendChild(r);this.options.isEnableFiltering&&(this.filterPopUp=document.createElement("div"),this.filterPopUp.setAttribute("class","tgrid-filter-popup"),this.rootElement.appendChild(this.filterPopUp),this.filterPopupViewModel=this.htmlProvider.getFilterPopupViewModel(this.filterPopUp),this.htmlProvider.addFilteringPopUp(this.options,this.filterPopUp,this.filterPopupViewModel));this.mobileHeader=document.createElement("div");this.mobileHeader.className="tgrid-mobile-header mobile";this.rootElement.appendChild(this.mobileHeader);this.tableHeader=document.createElement("thead");this.tableHeader.setAttribute("class","tgrid-table-header desktop");r.appendChild(this.tableHeader);this.rootElement.appendChild(this.headerContainer);this.tableBodyContainer=document.createElement("div");this.tableBodyContainer.className="tgrid-tablebodycontainer desktop";t.isEnableVirtualScroll?this.tableBodyContainer.onscroll=function(){return f.scrollTable()}:this.itemProvider.getTotalItemsCount(t.filterDescriptors,function(n){f.options.firstLoadSize=n});u=document.createElement("table");u.className="tgrid-table";this.tableBodyContainer.appendChild(u);this.tableBody=document.createElement("tbody");u.appendChild(this.tableBody);this.rootElement.appendChild(this.tableBodyContainer);this.mobileContainer=document.createElement("div");this.mobileContainer.setAttribute("class","tgrid-mobile-container mobile");this.rootElement.appendChild(this.mobileContainer);this.tableFooter=document.createElement("div");this.tableFooter.setAttribute("class","tgrid-footer");this.rootElement.appendChild(this.tableFooter);this.refreshFooter();t.isEnableVirtualScroll&&(this.buisyIndicator=document.createElement("div"),this.buisyIndicator.className="tgrid-buisy-indicator",this.rootElement.appendChild(this.buisyIndicator),this.scrollBar=document.createElement("div"),this.scrollBar.className="tgrid-scroll",o=document.createElement("div"),o.style.height="1000px",this.scrollBar.appendChild(o),this.rootElement.appendChild(this.scrollBar),this.scrollBar.onmouseup=function(){return f.onManualScroll()});this.targetElement.appendChild(this.rootElement);this.tableBodyContainer.scrollTop=0;this.options.groupBySortDescriptor.length>0?(this.refreshHeader(),this.refreshBody(t.isEnableVirtualScroll)):this.sortBy(this.options.sortDescriptor.path)}return t.getGridObject=function(n){return n.grid==undefined||n.grid==null?n.parentElement==document.body?null:t.getGridObject(n.parentElement):n.grid},t.prototype.columnsResized=function(n){parseInt(n.width)<5&&(n.width="5");this.htmlProvider.updateColumnWidth(this.options,this.tableHeader,this.tableBody,this.tableFooter)},t.prototype.getPreviousPageFirsItemIndex=function(){var n=this.firstVisibleItemIndex-this.options.batchSize;return n<0&&(n=0),n},t.prototype.getPreviousPageSize=function(){var n=this.options.batchSize+(this.options.firstLoadSize-this.visibleItems.length),t=this.firstVisibleItemIndex-n;return t<0?n+t:n},t.prototype.getNextPageFirstItemIndex=function(){return this.firstVisibleItemIndex+this.visibleItems.length},t.prototype.getNextPageSize=function(){return this.options.batchSize},t.prototype.getEffectiveSorting=function(){for(var r,i,t=[],u=!1,n=0;n<this.options.groupBySortDescriptor.length;n++){for(r=!1,i=0;i<t.length;i++)if(this.options.sortDescriptor.path==this.options.groupBySortDescriptor[n].path&&(u=!0),t[i].path==this.options.groupBySortDescriptor[n].path){r=!0;break}r||(this.options.groupBySortDescriptor[n].path==this.options.sortDescriptor.path&&(this.options.groupBySortDescriptor[n].asc=this.options.sortDescriptor.asc),t.push(this.options.groupBySortDescriptor[n]))}return u||t.push(this.options.sortDescriptor),t},t.prototype.getEffectiveFiltering=function(){var n=[];return(this.options.filterDescriptors!=null||this.options.filterDescriptors.length>0)&&(n=n.concat(this.options.filterDescriptors)),n},t.prototype.getCollapsedGroupFilter=function(){for(var t=[],n=0;n<this.collapsedFilterGroup.length;n++)(this.collapsedFilterGroup[n]!=null||this.collapsedFilterGroup[n].length>0)&&(t=t.concat(this.collapsedFilterGroup[n]));return t},t.prototype.scrollTable=function(){!this.isPreloadingNext&&this.enablePreload&&this.tableBodyContainer.scrollTop>(this.tableBodyContainer.scrollHeight-this.tableBodyContainer.clientHeight)/4*3&&this.nextPage==null&&this.preloadNextPage();!this.isPreloadingPrevious&&this.enablePreload&&this.tableBodyContainer.scrollTop<(this.tableBodyContainer.scrollHeight-this.tableBodyContainer.clientHeight)/4&&this.previousPage==null&&this.preloadPreviousPage();this.totalItemsCount>this.firstVisibleItemIndex+this.visibleItems.length&&this.tableBodyContainer.scrollTop+this.tableBodyContainer.clientHeight>=this.tableBodyContainer.scrollHeight&&this.showNextPage();this.firstVisibleItemIndex>0&&this.tableBodyContainer.scrollTop==0&&this.showPreviousPage();this.updateGlobalScroll()},t.prototype.updateGlobalScroll=function(){for(var i,r=this.htmlProvider.getFirstVisibleItem(this.tableBody,this.visibleViewModels,this.tableBodyContainer.scrollTop),t=this.firstVisibleItemIndex,n=0;n<this.visibleItems.length;n++)if(r.item==this.visibleItems[n]){t=this.firstVisibleItemIndex+n;break}i=1e3/this.totalItemsCount*t;this.scrollBar.scrollTop=i},t.prototype.onManualScroll=function(){var n=this,t=1e3/this.totalItemsCount,i=this.scrollBar.scrollTop/t;this.showBuisyIndicator();this.previousPage=null;this.nextPage=null;this.itemProvider.getItems(i,this.options.firstLoadSize,this.getEffectiveSorting(),this.getEffectiveFiltering(),this.getCollapsedGroupFilter(),function(t,i){n.tableBodyContainer.scrollTop=1;n.firstVisibleItemIndex=i;n.visibleItems=t;n.visibleViewModels=n.buildViewModels(n.visibleItems);n.updateVisibleItems();n.hideBuisyIndicator()})},t.prototype.preloadPreviousPage=function(){var n=this,t=this.getPreviousPageSize();t>0&&(this.isPreloadingPrevious=!0,this.itemProvider.getItems(this.getPreviousPageFirsItemIndex(),t,this.getEffectiveSorting(),this.getEffectiveFiltering(),this.getCollapsedGroupFilter(),function(t){n.previousPage=t;n.isPreloadingPrevious=!1}))},t.prototype.preloadNextPage=function(){var n=this;this.isPreloadingNext=!0;this.itemProvider.getItems(this.getNextPageFirstItemIndex(),this.getNextPageSize(),this.getEffectiveSorting(),this.getEffectiveFiltering(),this.getCollapsedGroupFilter(),function(t){n.nextPage=t;n.isPreloadingNext=!1})},t.prototype.showPreviousPage=function(){var n=this,t;this.previousPage==null?(this.showBuisyIndicator(),this.isPreloadingPrevious||this.preloadNextPage(),setTimeout(function(){n.showPreviousPage()},100)):this.previousPage!=null&&this.previousPage.length>0&&(this.hideBuisyIndicator(),this.enablePreload=!1,this.visibleItems.splice(this.visibleItems.length-this.options.batchSize,this.options.batchSize),this.firstVisibleItemIndex-=this.options.batchSize,this.firstVisibleItemIndex<0&&(this.firstVisibleItemIndex=0),t=this.previousPage[this.previousPage.length-1],this.visibleItems=this.previousPage.concat(this.visibleItems),this.visibleViewModels=this.buildViewModels(this.visibleItems),this.updateVisibleItems(),setTimeout(function(){for(var u,r=[],i=0;i<n.visibleViewModels.length;i++)if(r.push(n.visibleViewModels[i]),n.visibleViewModels[i].item==t)break;u=n.htmlProvider.getElemntsSize(n.tableBody,r);n.tableBodyContainer.scrollTop=u;n.previousPage=null;n.nextPage=null;n.enablePreload=!0},1))},t.prototype.showNextPage=function(){var n=this,t;this.nextPage==null?(this.showBuisyIndicator(),this.isPreloadingNext||this.preloadNextPage(),setTimeout(function(){n.showNextPage()},100)):this.nextPage!=null&&this.nextPage.length>0&&(this.hideBuisyIndicator(),this.enablePreload=!1,this.visibleItems.splice(0,this.options.batchSize),this.firstVisibleItemIndex+=this.options.batchSize,t=this.nextPage[0],this.visibleItems=this.visibleItems.concat(this.nextPage),this.visibleViewModels=this.buildViewModels(this.visibleItems),this.updateVisibleItems(),setTimeout(function(){for(var u,r=[],i=0;i<n.visibleViewModels.length;i++)if(r.push(n.visibleViewModels[i]),n.visibleViewModels[i].item==t)break;u=n.htmlProvider.getElemntsSize(n.tableBody,r);n.tableBodyContainer.scrollTop=u-n.tableBodyContainer.clientHeight;n.nextPage=null;n.previousPage=null;n.enablePreload=!0},1))},t.prototype.addGroupBy=function(t,i){this.options.groupBySortDescriptor.push(new n.SortDescriptor(t,i));this.refreshHeader();this.refreshBody()},t.prototype.deleteGroupBy=function(n){for(var t=0;t<this.options.groupBySortDescriptor.length;t++)this.options.groupBySortDescriptor[t].path==n&&this.options.groupBySortDescriptor.splice(t,1);this.refreshHeader();this.refreshBody()},t.prototype.showHideListOnClick=function(n){n.getAttribute("style")!="display:block;"?n.setAttribute("style","display:block;"):n.removeAttribute("style")},t.prototype.showDivElement=function(n){n.setAttribute("style","display:block;")},t.prototype.showTableCellElement=function(n){n.setAttribute("style","display:table-cell;")},t.prototype.hideElement=function(n){n.removeAttribute("style")},t.prototype.hideFilter=function(n){n.removeAttribute("style");document.onclick=null},t.prototype.showFilterBox=function(n,t,i){var r=this.options.isEnableGrouping?58:26;n.setAttribute("style","display:block;left:"+i+"px;top:"+r+"px");this.options.filterPath=t},t.prototype.addFilter=function(t,i,r,u){this.clearFilter(t,u,!1);this.options.filterDescriptors.push(new n.FilterDescriptor(t,i,r));this.refreshBody();this.hideElement(u)},t.prototype.clearFilter=function(n,t,i){typeof i=="undefined"&&(i=!0);for(var r=0;r<this.options.filterDescriptors.length;r++)this.options.filterDescriptors[r].path==n&&this.options.filterDescriptors.splice(r,1);i&&this.refreshBody();this.hideElement(t)},t.prototype.sortBy=function(n){n!=null&&(n==this.options.sortDescriptor.path?this.options.sortDescriptor.asc?this.options.sortDescriptor.asc=!this.options.sortDescriptor.asc:(this.options.sortDescriptor.path=null,this.options.sortDescriptor.asc=null):(this.options.sortDescriptor.path=n,this.options.sortDescriptor.asc=!0));this.refreshHeader();this.refreshBody()},t.prototype.mobileSortBy=function(t,i){i!=null?(this.options.sortDescriptor.path=t,this.options.sortDescriptor.asc=i):this.options.sortDescriptor=new n.SortDescriptor(null,null);this.refreshHeader();this.refreshBody()},t.prototype.selectPage=function(n){this.options.currentPage=n;this.refreshHeader();this.refreshBody();this.refreshFooter()},t.prototype.selectItem=function(t,i){if(this.options.selectionMode==n.SelectionMode.Multi)if(i){for(var r=0;r<this.options.selection.length;r++)if(t.item==this.options.selection[r])return this.options.selection.splice(r,1),this.refreshBody(),!1;this.options.selection.push(t.item)}else this.options.selection=[t.item];else this.options.selection=this.options.selectionMode==n.SelectionMode.Single?[t.item]:null;return this.options.selection.length==1&&(this.options.showDetailFor.item=this.options.selection[0]),this.htmlProvider.updateTableDetailRow(this.options,this.tableBodyContainer.getElementsByTagName("tbody")[0],this.options.showDetailFor.item),this.htmlProvider.updateMobileDetailRow(this.options,this.mobileContainer,this.options.showDetailFor.item),this.options.showDetailFor=new n.ShowDetail,this.updateFooterViewModel(),!0},t.prototype.buildViewModels=function(t){for(var f,e,h,o,r,s=[],u=[],c=[],i=0;i<this.options.groupBySortDescriptor.length;i++)u.push(""),c.push(!1);for(f=0;f<t.length;f++){for(e=!1,i=0;i<this.options.groupBySortDescriptor.length;i++)if(h=getMemberValue(t[f],this.options.groupBySortDescriptor[i].path),u[i]!==h){for(u[i]=h,o=new n.FilterDescriptor(this.options.groupBySortDescriptor[0].path,u[0],n.FilterCondition.NotEquals),r=1;r<=i;r++)o.children.push(new n.FilterDescriptor(this.options.groupBySortDescriptor[r].path,u[r],n.FilterCondition.NotEquals));for(e=this.isFilterInCollapsed(o),s.push(new n.ItemViewModel(null,new n.GroupHeaderDescriptor(u[i],i,e,o),this,!0)),r=i+1;r<this.options.groupBySortDescriptor.length;r++)u[r]="";e&&(i=this.options.groupBySortDescriptor.length)}e||s.push(new n.ItemViewModel(null,t[f],this,!1))}return s},t.prototype.isFiltersEquals=function(n,t){var r,i;if(n.path==t.path&&n.value==t.value&&n.children.length<=t.children.length){for(r=0,i=0;i<n.children.length;i++)n.children[i].path==t.children[i].path&&n.children[i].value==t.children[i].value&&r++;if(r==n.children.length)return!0}return!1},t.prototype.isFilterInCollapsed=function(n){for(var t=0;t<this.collapsedFilterGroup[n.children.length].length;t++)if(this.isFiltersEquals(n,this.collapsedFilterGroup[n.children.length][t]))return!0;return!1},t.prototype.filterDescriptorToArray=function(t){var i=[];return i=i.concat(t.children),i.push(new n.FilterDescriptor(t.path,t.value,t.condition)),i},t.prototype.updateVisibleItems=function(){var n=this;setTimeout(function(){n.tableBody.innerHTML="";n.htmlProvider.updateTableBodyElement(n.options,n.tableBody,n.visibleViewModels,function(t,i){return n.selectItem(t,i)});n.htmlProvider.updateColumnWidth(n.options,n.tableHeader,n.tableBody,n.tableFooter)},1);setTimeout(function(){n.mobileContainer.innerHTML="";n.htmlProvider.updateMobileItemsList(n.options,n.mobileContainer,n.visibleViewModels,function(t,i){return n.selectItem(t,i)})},1)},t.prototype.getHtmlProvider=function(t){return t.framework==n.Framework.Knockout?new n.KnockoutHtmlProvider:t.framework==n.Framework.Angular?new n.AngularHtmlProvider:void 0},t.prototype.getFirstItemNumber=function(){return this.options.pageSize*this.options.currentPage},t.prototype.getPageSize=function(){return this.options.pageSize},t.prototype.refreshHeader=function(){var n=this;this.htmlProvider.updateTableHeadElement(this.options,this.tableHeader,this.groupByElement,this.filterPopUp,this.itemProvider.isSortable(),function(t){return n.columnsResized(t)});this.refreshMobileHeader()},t.prototype.updateBody=function(){this.refreshBody()},t.prototype.refreshBody=function(n){typeof n=="undefined"&&(n=!1);var t=this;n&&this.showBuisyIndicator();this.options.isEnablePaging?this.itemProvider.getTotalItemsCount(this.getEffectiveFiltering(),function(i){t.totalItemsCount=i;t.itemProvider.getItems(t.getFirstItemNumber(),t.getPageSize(),t.getEffectiveSorting(),t.getEffectiveFiltering(),t.getCollapsedGroupFilter(),function(i,r){t.firstVisibleItemIndex=r;t.visibleItems=i;t.visibleViewModels=t.buildViewModels(t.visibleItems);t.updateVisibleItems();t.updateFooterViewModel();n&&t.hideBuisyIndicator()})}):this.itemProvider.getTotalItemsCount(this.getEffectiveFiltering(),function(i){t.totalItemsCount=i;t.itemProvider.getItems(t.getFirstItemNumber(),t.options.firstLoadSize,t.getEffectiveSorting(),t.getEffectiveFiltering(),t.getCollapsedGroupFilter(),function(i,r){t.firstVisibleItemIndex=r;t.visibleItems=i;t.visibleViewModels=t.buildViewModels(t.visibleItems);t.updateVisibleItems();t.updateFooterViewModel();n&&t.hideBuisyIndicator()})})},t.prototype.refreshFooter=function(){this.tableFooter.innerHTML="";this.htmlProvider.updateTableFooterElement(this.options,this.tableFooter,this.totalItemsCount,this.footerViewModel)},t.prototype.updateFooterViewModel=function(){this.footerViewModel!=null&&(this.footerViewModel.setCurrentPage(this.options.currentPage+1),this.footerViewModel.setSelectedItem(this.options.selection[0]),this.footerViewModel.setTotalCount(this.totalItemsCount),this.options.isEnablePaging?this.footerViewModel.setTotalPages(Math.ceil(this.totalItemsCount/this.options.pageSize)):this.footerViewModel.setTotalPages(1))},t.prototype.showBuisyIndicator=function(){this.buisyIndicator.removeAttribute("style")},t.prototype.hideBuisyIndicator=function(){this.buisyIndicator.setAttribute("style","display: none;")},t.prototype.setCollapsedFilters=function(n){this.collapsedFilterGroup[n.children.length].push(n);this.refreshBody()},t.prototype.removeCollapsedFilters=function(n){for(var t=0;t<this.collapsedFilterGroup[n.children.length].length;t++)this.isFiltersEquals(this.collapsedFilterGroup[n.children.length][t],n)&&this.collapsedFilterGroup[n.children.length].splice(t,1);this.refreshBody()},t.prototype.setFilters=function(n){this.removeFilters(!1);this.options.filterDescriptors.push(n);this.refreshMobileHeader();this.refreshBody()},t.prototype.removeFilters=function(n){typeof n=="undefined"&&(n=!0);for(var t=0;t<this.options.filterDescriptors.length;t++)this.options.filterDescriptors[t].path==this.options.filterPath&&this.options.filterDescriptors.splice(t,1);n&&(this.refreshMobileHeader(),this.refreshBody())},t.prototype.refreshMobileHeader=function(){this.htmlProvider.updateMobileHeadElement(this.options,this.mobileHeader,this.filterPopUp,this.itemProvider.isSortable())},t}();n.Grid=t})(n.TGrid||(n.TGrid={}));var t=n.TGrid}(TesserisPro||(TesserisPro={}))