var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},TesserisPro,TGrid;(function(n){(function(t){var i=function(i){function r(){i.apply(this,arguments)}return __extends(r,i),r.prototype.getElemntsSize=function(n,t){for(var e,r,u=0,f=n.children,i=0;i<f.length;i++)e=f.item(i),r=t[i],r!=null&&t.indexOf(r)>0&&(u+=e.clientHeight);return u},r.prototype.getFirstVisibleItem=function(n,t,i){for(var o,u,f=0,e=n.children,r=0;r<e.length;r++)if(o=e.item(r),u=t[r],u!=null&&t.indexOf(u)>0&&(f+=o.clientHeight),f>i)return u;return null},r.prototype.getTableElement=function(){var n=document.createElement("table");return n.className="tgrid-table",n},r.prototype.getFooterViewModel=function(){},r.prototype.updateTableHeadElement=function(n,i,r,u,f){var a,v,o,e,s,h,c,l,w,y,p;if(i.innerHTML!=null&&i.innerHTML!=""){if(this.showNeededIntends(i,n.groupBySortDescriptor.length,t.Grid.getGridObject(i)),f)for(this.removeArrows(i),a=i.getElementsByTagName("th"),e=n.columns.length,v=0;e<a.length,v<n.columns.length;e++,v++)n.sortDescriptor.path==n.columns[v].sortMemberPath&&(a[e]=this.addArrows(a[e],n,e));this.updateGroupByElements(n,i,r)}else{for(this.addGroupBy(n,i,r),o=document.createElement("tr"),this.appendIndent(o,n.columns.length,!0),this.showNeededIntends(o,n.groupBySortDescriptor.length,t.Grid.getGridObject(i)),e=0;e<n.columns.length;e++)s=document.createElement("th"),s.setAttribute("width",n.columns[e].width),h=document.createElement("div"),h.className="tgrid-header-cell-container",c=document.createElement("div"),l=document.createElement("div"),c.className="tgrid-header-cell-content",l.className="tgrid-header-cell-buttons",h.appendChild(c),h.appendChild(l),s.appendChild(h),n.columns[e].header!=null?n.columns[e].header.applyTemplate(c):(w=n.columns[e].member!=null?n.columns[e].member:"",this.createDefaultHeader(c,w)),function(i){s.onclick=function(r){return t.Grid.getGridObject(r.target).sortBy(n.columns[i].sortMemberPath)}}(e),f&&n.sortDescriptor.path==n.columns[e].sortMemberPath&&this.addArrows(l,n,e),n.isEnableFiltering&&(y=document.createElement("div"),y.setAttribute("class","tgrid-filter-button"),function(r){y.onclick=function(f){for(var s,o=f.target.offsetLeft,e=0;e<r;e++)o+=parseInt(n.columns[e].width);if(s=i.getElementsByClassName("tgrid-table-indent-cell"),s.length>0)for(e=0;e<n.groupBySortDescriptor.length;e++)o+=20;t.Grid.getGridObject(f.target).showFilterBox(u,n.columns[r].sortMemberPath,o);f.cancelBubble=!0}}(e),l.appendChild(y)),o.appendChild(s);p=document.createElement("th");p.setAttribute("class","tgrid-placeholder");o.appendChild(p);i.appendChild(o)}},r.prototype.updateTableBodyElement=function(n,t,i,r){var f,u;for(n.showDetailFor.isDetailColumn||(n.showDetailFor.column=-1),f=0;f<i.length;f++)this.appendTableElement(n,t,i[f],0,r);u=t.getAttribute("class");u==null||u==undefined||u==""?u="desktop":u.indexOf("desktop")==-1&&(u+=" desktop");t.setAttribute("class",u)},r.prototype.addDetailRow=function(){},r.prototype.updateTableDetailRow=function(n,i,r){var f=i.getElementsByClassName("details"),u,e,o;if(f.length>0&&f[0].parentNode.removeChild(f[0]),n.selectionMode==t.SelectionMode.Multi){if(!n.ctrlKey)for(u=0;u<i.children.length;u++)i.children.item(u).removeAttribute("class");n.isSelected(r)?n.selectedRow.setAttribute("class","selected"):n.selectedRow.removeAttribute("class")}if(n.selectionMode==t.SelectionMode.Single){for(u=0;u<i.children.length;u++)i.children.item(u).removeAttribute("class");n.isSelected(r)?n.selectedRow.setAttribute("class","selected"):n.selectedRow.removeAttribute("class")}e=i.getElementsByClassName("selected");this.hasDetails(e,n)&&(o=this.buildDetailsRow(n),o.setAttribute("class","details"),insertAfter(e[0],o))},r.prototype.updateTableFooterElement=function(n,t,i,r){r==null&&n.isEnablePaging?this.updateTableFooterElementDefault(n,t,i):n.tableFooterTemplate!=null&&n.tableFooterTemplate.applyTemplate(t)},r.prototype.addFiltringPopUp=function(n,t){n.filterPopup==null?this.defaultFiltringPopUp(n,t):n.filterPopup.applyTemplate(t)},r.prototype.appendTableElement=function(n,t,i,r,u){var f,e;i.isGroupHeader?(f=this.buildGroupHeaderRow(n,i.item),t.appendChild(f)):(e=this.buildRowElement(n,i,t,u),t.appendChild(e))},r.prototype.buildRowElement=function(n,i,r,u){var e=document.createElement("tr"),f,o,s;for(n.isSelected(i.item)&&e.setAttribute("class","selected"),this.appendIndent(e,n.groupBySortDescriptor.length,!1),f=0;f<n.columns.length;f++)o=document.createElement("td"),o.setAttribute("width",n.columns[f].width),n.columns[f].cell!=null?n.columns[f].cell.applyTemplate(o):n.columns[f].member!=null&&(o=this.createDefaultCell(o,n.columns[f].member)),e.appendChild(o);return s=document.createElement("td"),s.setAttribute("class","tgrid-placeholder"),e.appendChild(s),function(i){e.onclick=function(r){n.selectionMode!=t.SelectionMode.None&&(n.ctrlKey=r.ctrlKey,n.selectedRow=this,u(i,r.ctrlKey))}}(i),e},r.prototype.buildDetailsRow=function(n){var i=document.createElement("tr"),t=document.createElement("td");this.appendIndent(i,n.groupBySortDescriptor.length,!1);i.setAttribute("class","details");t.setAttribute("colspan",(n.columns.length+1).toString());n.showDetailFor.column==-1?n.detailsTemplateHtml.applyTemplate(t):n.columns[n.showDetailFor.column].cellDetail.applyTemplate(t);var u=t.innerHTML.indexOf("{{item."),f=t.innerHTML.indexOf("}}"),r=t.innerHTML.substring(u+7,f);return t.innerHTML=t.innerHTML.replace("{{item."+r+"}}",n.showDetailFor.item[r]),i.appendChild(t),i},r.prototype.buildGroupHeaderRow=function(t,i){var u=document.createElement("tr"),r=document.createElement("td"),f;return this.appendIndent(u,i.level,!1),f=t.columns.length+1+t.groupBySortDescriptor.length-i.level,r.setAttribute("colspan",f.toString()),r.setAttribute("class","tgrid-table-group-header"),t.groupHeaderTemplate!=null?t.groupHeaderTemplate.applyTemplate(r):r=this.createDefaultGroupHeader(r),r.innerHTML=r.innerHTML.replace("{{item.value}}",i.value),t.isEnableCollapsing&&(r.onclick=i.collapse?function(t){n.TGrid.Grid.getGridObject(t.target).removeCollapsedFilters(i.filterDescriptor)}:function(t){n.TGrid.Grid.getGridObject(t.target).setCollapsedFilters(i.filterDescriptor)}),u.appendChild(r),u},r.prototype.addArrows=function(n,t){var i,r;return t.sortDescriptor.asc&&(i=document.createElement("div"),i.classList.add("tgrid-arrow-up"),n.appendChild(i)),t.sortDescriptor.asc||(r=document.createElement("div"),r.classList.add("tgrid-arrow-down"),n.appendChild(r)),n},r.prototype.removeArrows=function(n){var t=n.getElementsByClassName("tgrid-arrow-up");t.length==1&&t[0].parentNode.removeChild(t[0]);t=n.getElementsByClassName("tgrid-arrow-down");t.length==1&&t[0].parentNode.removeChild(t[0])},r.prototype.appendIndent=function(n,t,i){for(var r,f=i?"th":"td",u=0;u<t;u++)r=document.createElement(f),r.className="tgrid-table-indent-cell",n.appendChild(r)},r.prototype.updateMobileHeadElement=function(n,i,r){var c,l,a,v,f,u,h;if(i.innerHTML!=null&&i.innerHTML!="")for(this.removeArrows(i),c=document.getElementsByClassName("tgrid-inline-block"),n.sortDescriptor.asc?(l=document.createElement("div"),l.classList.add("tgrid-arrow-up"),c[0].appendChild(l)):(a=document.createElement("div"),a.classList.add("tgrid-arrow-down"),c[0].appendChild(a)),v=document.getElementsByTagName("select"),u=0;u<n.columns.length;u++)n.columns[u].sortMemberPath==n.sortDescriptor.path&&(v[0].selectedIndex=u);else if(f=i.getAttribute("class"),f==null||f==undefined||f==""?f="mobile":f+=" mobile",i.setAttribute("class",f),r){var s=document.createElement("div"),o=document.createElement("div"),e=document.createElement("select");for(e.onchange=function(n){t.Grid.getGridObject(n.target).sortBy(e.options[e.selectedIndex].value)},u=0;u<n.columns.length;u++)h=document.createElement("option"),h.value=n.columns[u].sortMemberPath,h.text=n.columns[u].sortMemberPath,e.appendChild(h),n.columns[u].sortMemberPath==n.sortDescriptor.path&&(o=this.addArrows(o,n,u));o.classList.add("tgrid-inline-block");s.innerHTML+="Sorting by ";s.appendChild(e);s.appendChild(o);o.onclick=function(n){t.Grid.getGridObject(n.target).sortBy(e.options[e.selectedIndex].value)};i.appendChild(s)}else i.innerHTML="<div><\/div>"},r.prototype.updateMobileItemsList=function(n,t,i,r){var f,u;for(n.showDetailFor.isDetailColumn||(n.showDetailFor.column=-1),f=0;f<i.length;f++)this.appendMobileElement(n,t,i[f],0,r);u=t.getAttribute("class");u==null||u==undefined||u==""?u="mobile":u.indexOf("mobile")==-1&&(u+=" mobile");t.setAttribute("class",u);n.showDetailFor.isDetailColumn=!1},r.prototype.updateMobileDetailRow=function(n,i,r){var f=i.getElementsByClassName("details"),u,e,o;if(f.length>0&&f[0].parentNode.removeChild(f[0]),n.selectionMode==t.SelectionMode.Multi){if(!n.ctrlKey)for(u=0;u<i.children.length;u++)i.children.item(u).setAttribute("class","tgrid-mobile-row");n.isSelected(r.item)?n.selectedRow.setAttribute("class",n.selectedRow.getAttribute("class")+" selected"):i.children.item(u).setAttribute("class","tgrid-mobile-row")}if(n.selectionMode==t.SelectionMode.Single){for(u=0;u<i.children.length;u++)i.children.item(u).setAttribute("class","tgrid-mobile-row");n.isSelected(r)?n.selectedRow.setAttribute("class",n.selectedRow.getAttribute("class")+" selected"):i.children.item(u).setAttribute("class","tgrid-mobile-row")}e=i.getElementsByClassName("selected");this.hasDetails(e,n)&&(o=this.buildMobileDetailsRow(n),o.setAttribute("class","details"),insertAfter(e[0],o))},r.prototype.appendMobileElement=function(n,t,i,r,u){var f,e;i.isGroupHeader?(f=this.buildGroupMobileHeaderRow(n,i.item),t.appendChild(f)):(e=this.buildMobileRowElement(n,i,t,u),t.appendChild(e))},r.prototype.buildMobileRowElement=function(n,i,r,u){var f=document.createElement("div"),o,e,s;for(f.setAttribute("class","tgrid-mobile-row"),n.isSelected(i.item)&&f.setAttribute("class","selected tgrid-mobile-row"),e=0;e<n.groupBySortDescriptor.length;e++)f.innerHTML+="<div class='tgrid-mobile-indent-div'><\/div>";for(o=document.createElement("div"),o.setAttribute("class","tgrid-mobile-div"),n.mobileTemplateHtml.applyTemplate(o),f.appendChild(o),e=0;e<n.columns.length;e++)f.innerHTML=f.innerHTML.replace("{{item."+n.columns[e].sortMemberPath+"}}",i.item[n.columns[e].sortMemberPath]);return s=document.createElement("td"),s.setAttribute("class","tgrid-placeholder"),f.appendChild(s),function(i){f.onclick=function(f){var e;if(n.selectionMode!=t.SelectionMode.None&&u(i,f.ctrlKey),n.selectionMode==t.SelectionMode.Multi){if(!f.ctrlKey)for(e=0;e<r.children.length;e++)r.children.item(e).removeAttribute("class");n.isSelected(i.item)?this.setAttribute("class","selected"):this.removeAttribute("class")}if(n.selectionMode==t.SelectionMode.Single){for(e=0;e<r.children.length;e++)r.children.item(e).removeAttribute("class");n.isSelected(i.item)?this.setAttribute("class","selected"):this.removeAttribute("class")}}}(i),f},r.prototype.createDefaultGroupHeader=function(n){var i=document.createElement("div"),t=document.createElement("span");return t.innerHTML="{{item.value}}",t.setAttribute("style","color: green;"),i.appendChild(t),n.appendChild(i),n},r.prototype.buildMobileDetailsRow=function(n){var t=document.createElement("div");t.setAttribute("class","tgrid-mobile-details ");n.showDetailFor.column==-1?n.detailsTemplateHtml.applyTemplate(t):n.columns[n.showDetailFor.column].cellDetail.applyTemplate(t);var r=t.innerHTML.indexOf("{{item."),u=t.innerHTML.indexOf("}}"),i=t.innerHTML.substring(r+7,u);return t.innerHTML=t.innerHTML.replace("{{item."+i+"}}",n.showDetailFor.item[i]),t},r.prototype.buildGroupMobileHeaderRow=function(t,i){var r=document.createElement("div");return r.setAttribute("class","tgrid-mobile-group-header "),r.setAttribute("style","padding-left: "+20*i.level+"px !important;"),t.isEnableCollapsing&&(r.onclick=i.collapse?function(t){n.TGrid.Grid.getGridObject(t.target).removeCollapsedFilters(i.filterDescriptor)}:function(t){n.TGrid.Grid.getGridObject(t.target).setCollapsedFilters(i.filterDescriptor)}),t.groupHeaderTemplate!=null&&t.groupHeaderTemplate.applyTemplate(r),r.innerHTML=r.innerHTML.replace("{{item.value}}",i.value),r},r.prototype.createDefaultCell=function(n,t){var i=document.createElement("span"),r="{{item.".concat(t).concat("}}");return i.innerHTML=r,n.appendChild(i),n},r.prototype.GetAngularBinding=function(){return angular.module("TGrid",[]).directive("footer",function(){return{restrict:"E",transclude:!0,scope:{},controller:function(n){n.totalCount=256;n.$apply()},template:"<span> TotalCount:<\/span><span>{{totalCount}}<\/span>.",replace:!0}})},r}(t.BaseHtmlProvider);t.AngularHtmlProvider=i})(n.TGrid||(n.TGrid={}));var t=n.TGrid})(TesserisPro||(TesserisPro={})),function(n){(function(n){var t=function(){function n(){return this.directive={},this.directive.restrict="E",this.directive.link=function(n,t,i){var r=new TesserisPro.TGrid.Options(t[0],TesserisPro.TGrid.Framework.Angular),f,u,e,o,s;if(i.groupby!=undefined)for(f=i.groupby.split(" "),u=0;u<f.length;u++)r.groupBySortDescriptor.push(new TesserisPro.TGrid.SortDescriptor(f[u],!0));r.isEnablePaging=i.enablepaging==undefined?!1:i.enablepaging=="true"?!0:!1;e=i.pagesize;r.pageSize=parseInt(e);this.isEnablePaging&&(r.pageSize=isNaN(this.pageSize)||this.pageSize<1?10:this.pageSize);o=i.selectmode;r.selectionMode=o;isNaN(this.selectionMode)&&(r.selectionMode=1);r.isEnableVirtualScroll=i.enablevirtualscroll==undefined?!1:i.enablevirtualscroll=="true"?!0:!1;r.isEnableCollapsing=i.enablecollapsing==undefined?!1:i.enablecollapsing=="true"?!0:!1;r.isEnableGrouping=i.enablegrouping==undefined?!1:i.enablegrouping=="true"?!0:!1;r.isEnableFiltering=i.enablefiltering==undefined?!1:i.enablefiltering=="true"?!0:!1;s=new TesserisPro.TGrid.Grid(t[0],r,n[i.provider])},this.directive}return n}();n.Directive=t})(n.Angular||(n.Angular={}));var t=n.Angular}(TGrid||(TGrid={}))