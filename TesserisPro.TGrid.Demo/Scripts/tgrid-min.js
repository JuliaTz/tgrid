function isNull(n){return n==null}function isNotNull(n){return n!=null}function isUndefined(n){return typeof n=="undefined"}function isNotUndefined(n){return typeof n!="undefined"}function isNoU(n){return isUndefined(n)||isNull(n)}function isNotNoU(n){return isNotUndefined(n)&&isNotNull(n)}function isFunction(n){return n&&{}.toString.call(n)==="[object Function]"}function insertAfter(n,t){var i=n.parentNode,r=n.nextSibling;return r?i.insertBefore(t,r):i.appendChild(t)}function insertBefore(n,t){var i=n.parentNode;return i.insertBefore(t,n)}function getMemberValue(n,t){if(t==null||t.length==0)return n;for(var i=t.split("."),r=n;i.length>0;)r=r[i[0]],i.splice(0,1);return r}var TesserisPro;(function(n){(function(n){var t=function(){function t(){}return t.prototype.getTableElement=function(){var n=document.createElement("table");return n.className="tgrid-table",n},t.prototype.getElemntsSize=function(){return 0},t.prototype.getFirstVisibleItem=function(){return null},t.prototype.updateTableHeadElement=function(){},t.prototype.updateTableBodyElement=function(){},t.prototype.updateTableFooterElement=function(){},t.prototype.updateTableFooterElementDefault=function(n,t,i){var e=n.currentPage-n.pageSlide,u,o,f,r;for(e<0&&(e=0),u=n.currentPage+n.pageSlide,o=Math.ceil(i/n.pageSize),u>=o&&(u=o-1),f=document.createElement("div"),f.setAttribute("class","tgird-pagination"),e>0&&(f.innerHTML+="<span class='tgird-page-number' onclick='TesserisPro.TGrid.Grid.getGridObject(event.target).selectPage("+(e-1).toString()+")' >...<\/span>"),r=e;r<=u;r++)f.innerHTML+=n.currentPage==r?"<span class='tgird-page-current'>"+(r+1)+"<\/span>":"<span class='tgird-page-number' onclick='TesserisPro.TGrid.Grid.getGridObject(event.target).selectPage("+r+")' >"+(r+1)+"<\/span>";u<o-1&&(f.innerHTML+="<span class='tgird-page-number' onclick='TesserisPro.TGrid.Grid.getGridObject(event.target).selectPage("+u.toString()+")' >...<\/span>");t.innerHTML="";t.appendChild(f)},t.prototype.updateMobileHeadElement=function(){},t.prototype.updateMobileItemsList=function(){},t.prototype.updateGroupedTableBodyElement=function(){},t.prototype.hasDetails=function(n,t){if(n!=null&&n.length==1)if(t.showDetailFor.column==-1){if(t.detailsTemplateHtml!=null)return!0}else if(t.columns[t.showDetailFor.column].cellDetail!=null)return!0;return!1},t.prototype.updateTableDetailRow=function(){},t.prototype.updateMobileDetailRow=function(){},t.prototype.createDefaultHeader=function(n,t){var i=document.createElement("span"),r=document.createTextNode(t);return i.appendChild(r),n.appendChild(i),n},t.prototype.addGroupBy=function(t,i,r){var u,f,e,o;t.isEnableGrouping?(n.Grid.getGridObject(r).showDivElement(r),this.addGroupByElements(t,r),this.showGroupByElements(t,r,n.Grid.getGridObject(i)),u=document.createElement("div"),u.setAttribute("class","list-button-container"),f=document.createElement("ul"),f.setAttribute("class","group-by-ul"),e=document.createElement("a"),e.setAttribute("class","button-group-by"),e.onclick=function(t){n.Grid.getGridObject(t.target).showHideListOnClick(t.target.nextElementSibling)},u.appendChild(e),o=this.addListGroupByItems(t,f),this.showListGroupByItems(t,o,n.Grid.getGridObject(i)),u.appendChild(f),r.appendChild(u)):n.Grid.getGridObject(r).hideElement(r)},t.prototype.showNeededIntends=function(n,t,i){for(var f=t,u=n.getElementsByClassName("tgrid-table-indent-cell"),r=0;r<u.length;r++)i.hideElement(u[r]);for(u.length<t&&(f=u.length),r=0;r<f;r++)i.showTableCellElement(u[r])},t.prototype.addFiltringPopUp=function(){},t.prototype.defaultFiltringPopUp=function(t,i){var u=document.createElement("select"),r=document.createElement("option"),s,f,e,o;r.value=n.FilterCondition.None.toString();r.text="none";u.appendChild(r);r=document.createElement("option");r.value=n.FilterCondition.Equals.toString();r.text="=";u.appendChild(r);r=document.createElement("option");r.value=n.FilterCondition.NotEquals.toString();r.text="<>";u.appendChild(r);i.appendChild(u);u.selectedIndex=1;i.innerHTML+="<br>";s=document.createElement("input");s.setAttribute("value","c3");i.appendChild(s);i.innerHTML+="<br>";f=document.createElement("button");f.innerText="apply";f.onclick=function(r){n.Grid.getGridObject(r.target).addFilter(t.filterPath,i.getElementsByTagName("input")[0].value,i.getElementsByTagName("select")[0].selectedIndex,i)};i.appendChild(f);e=document.createElement("button");e.innerText="clear";e.onclick=function(r){n.Grid.getGridObject(r.target).clearFilter(t.filterPath,i)};i.appendChild(e);o=document.createElement("button");o.innerText="exit";o.onclick=function(t){n.Grid.getGridObject(t.target).hideElement(i)};i.appendChild(o)},t.prototype.addGroupByElements=function(t,i){for(var u,e,f,r=0;r<t.columns.length;r++)t.columns[r].groupMemberPath!=null&&(u=document.createElement("div"),t.columns[r].header!=null?t.columns[r].header.applyTemplate(u):(e=t.columns[r].member!=null?t.columns[r].member:t.columns[r].groupMemberPath,u=this.createDefaultHeader(u,e)),u.setAttribute("class","condition-group-by"),u["data-group-by"]=t.columns[r].groupMemberPath,f=document.createElement("input"),f.setAttribute("type","button"),f.setAttribute("class","delete-condition-group-by"),f.setAttribute("value","x"),f["data-delete-groupby"]=new n.SortDescriptor(t.columns[r].groupMemberPath,!0),f.onclick=function(t){var i=t.target["data-delete-groupby"];n.Grid.getGridObject(t.target).deleteGroupBy(i.path,i.asc)},u.appendChild(f),i.appendChild(u))},t.prototype.updateGroupByElements=function(t,i,r){if(t.isEnableGrouping){this.showGroupByElements(t,r,n.Grid.getGridObject(i));var u=r.getElementsByClassName("list-button-container");u[0].appendChild(this.showListGroupByItems(t,u[0].children[1],n.Grid.getGridObject(i)))}else n.Grid.getGridObject(r).hideElement(r)},t.prototype.createDefaultMobileTemplate=function(n,t){for(var r,u,f,i=0;i<t.columns.length;i++)t.columns[i].device.indexOf("mobile")!=-1&&(r=document.createElement("div"),u=document.createElement("span"),u.innerHTML=t.columns[i].member!=null?t.columns[i].member:t.columns[i].sortMemberPath!=null?t.columns[i].sortMemberPath:t.columns[i].groupMemberPath!=null?t.columns[i].groupMemberPath:"",f=document.createElement("span"),f.innerHTML=": ",r.appendChild(u),r.appendChild(f),n.appendChild(r));return n},t.prototype.showGroupByElements=function(n,t,i){for(var f,u=t.getElementsByClassName("condition-group-by"),r=0;r<u.length;r++)i.hideElement(u[r]);for(f=n.groupBySortDescriptor.length-1;f>-1;f--)for(r=0;r<u.length;r++)if(u[r]["data-group-by"]==n.groupBySortDescriptor[f].path){i.showDivElement(u[r]);t.insertBefore(u[r],t.firstChild);continue}},t.prototype.addListGroupByItems=function(t,i){for(var u,f,r=0;r<t.columns.length;r++)t.columns[r].groupMemberPath!=null&&(u=document.createElement("li"),u.onclick=function(t){for(var i=t.target;i&&i.nodeName!=="LI";)i=i.parentNode;n.Grid.getGridObject(t.target).addGroupBy(i["data-group-by-condition"],!0);n.Grid.getGridObject(t.target).hideElement(i.parentNode)},t.columns[r].header!=null?t.columns[r].header.applyTemplate(u):(f=t.columns[r].member!=null?t.columns[r].member:t.columns[r].groupMemberPath,u=this.createDefaultHeader(u,f)),u["data-group-by-condition"]=t.columns[r].groupMemberPath,i.appendChild(u));return i},t.prototype.showListGroupByItems=function(n,t,i){for(var e,f,u=t.getElementsByTagName("li"),r=0;r<u.length;r++){for(u[r].getAttribute("style")=="display:block;"&&i.hideElement(u[r]),e=!0,f=0;f<n.groupBySortDescriptor.length;f++)if(n.groupBySortDescriptor[f].path==u[r]["data-group-by-condition"]){e=!1;continue}e&&i.showDivElement(u[r])}return t},t}();n.BaseHtmlProvider=t})(n.TGrid||(n.TGrid={}));var t=n.TGrid})(TesserisPro||(TesserisPro={})),function(n){(function(n){var t=function(){function t(t,i,r,u,f){this.path=t;this.value=i;this.condition=r;this.children=f!=undefined?f:[];this.operation=u!=undefined?u:n.FilterOperation.And}return t}();n.FilterDescriptor=t})(n.TGrid||(n.TGrid={}));var t=n.TGrid}(TesserisPro||(TesserisPro={})),function(n){(function(n){var t=function(){function n(n,t,i,r){this.totalCount=n;this.selectedItem=t;this.currentPage=i;this.totalPages=r}return n}();n.FooterViewModel=t})(n.TGrid||(n.TGrid={}));var t=n.TGrid}(TesserisPro||(TesserisPro={})),function(n){(function(n){var t=function(){function n(n,t,i,r){this.collapse=i;this.value=n;this.level=t;this.filterDescriptor=r}return n}();n.GroupHeaderDescriptor=t})(n.TGrid||(n.TGrid={}));var t=n.TGrid}(TesserisPro||(TesserisPro={})),function(n){(function(n){var t=function(){function n(n,t,i,r){this.model=n;this.item=t;this.grid=i;this.isGroupHeader=r}return n.prototype.getCellDetailFor=function(n){this.grid.options.showDetailFor.column=n;this.grid.options.showDetailFor.isDetailColumn=!0},n}();n.ItemViewModel=t})(n.TGrid||(n.TGrid={}));var t=n.TGrid}(TesserisPro||(TesserisPro={})),function(n){(function(t){var e,o,s,h,r,u,i,f;(function(n){n[n.Knockout=0]="Knockout";n[n.Angular=1]="Angular"})(t.Framework||(t.Framework={}));e=t.Framework,function(n){n[n.None=0]="None";n[n.Single=1]="Single";n[n.Multi=2]="Multi"}(t.SelectionMode||(t.SelectionMode={}));o=t.SelectionMode,function(n){n[n.None=0]="None";n[n.Equals=1]="Equals";n[n.NotEquals=2]="NotEquals"}(t.FilterCondition||(t.FilterCondition={}));s=t.FilterCondition,function(n){n[n.And=0]="And";n[n.Or=1]="Or"}(t.FilterOperation||(t.FilterOperation={}));h=t.FilterOperation;r=function(){function n(){}return n}();t.ColumnInfo=r;u=function(){function n(){this.column=-1;this.item=null;this.isDetailColumn=!1}return n}();t.ShowDetail=u;i=function(){function n(n){this.content="";this.content=n.innerHTML==null?n.innerText:n.innerHTML}return n.prototype.applyTemplate=function(n){n.innerHTML=this.content!=null?this.content:""},n}();t.Template=i;f=function(){function t(n,t){this.columns=[];this.pageSlide=1;this.batchSize=10;this.firstLoadSize=20;this.currentPage=0;this.groupBySortDescriptor=[];this.filterDescriptors=[];this.selection=[];this.target=n;this.framework=t;this.initialize()}return t.prototype.isSelected=function(n){for(var t=0;t<this.selection.length;t++)if(this.selection[t]==n)return!0;return!1},t.prototype.initialize=function(){var w=this.target.getElementsByTagName("script")[0].innerHTML,o=document.createElement("div"),f,l,a,v,y,p,s;o.innerHTML=w;var b=o.getElementsByTagName("header"),k=o.getElementsByTagName("cell"),d=o.getElementsByTagName("celldetail"),t=o.getElementsByTagName("column");if(!(b.length==t.length&&k.length==t.length&&d.length==t.length))throw" Columns not fully described ";for(f=0;f<t.length;f++){var h=$(t[f]),c=h.find("header"),g=h.find("cell"),e=new r;e.member=t[f].attributes["data-g-member"]!=undefined?t[f].attributes["data-g-member"].nodeValue:null;e.header=c.length>0?new i(c[0]):null;e.cell=c.length>0?new i(g[0]):null;l=h.find("celldetail");e.cellDetail=l.length==1?new i(l[0]):null;e.sortMemberPath=t[f].attributes["data-g-sort-member"]!=undefined?t[f].attributes["data-g-sort-member"].nodeValue:e.member;e.groupMemberPath=t[f].attributes["data-g-group-member"]!==undefined?t[f].attributes["data-g-group-member"].nodeValue:e.member;e.width=t[f].attributes["data-g-width"]!=null?t[f].attributes["data-g-width"].nodeValue:100;e.device=t[f].attributes["data-g-views"]!=null?t[f].attributes["data-g-views"].nodeValue:"mobile,desktop";this.columns.push(e)}this.sortDescriptor=new n.TGrid.SortDescriptor(this.columns[0].sortMemberPath,!0);a=o.getElementsByTagName("filterpopup");this.filterPopup=a.length==1?new i(a[0]):null;v=o.getElementsByTagName("mobile");this.mobileTemplateHtml=v.length==1?new i(v[0]):null;y=o.getElementsByTagName("groupheader");this.groupHeaderTemplate=y.length==1?new i(y[0]):null;p=o.getElementsByTagName("details");this.detailsTemplateHtml=p.length==1?new i(p[0]):null;this.showDetailFor=new u;s=o.getElementsByTagName("footer");this.tableFooterTemplate=s.length==1?new i(s[0]):null;this.tableFooterTemplate=s.length!=0?new i(s[0]):null},t}();t.Options=f})(n.TGrid||(n.TGrid={}));var t=n.TGrid}(TesserisPro||(TesserisPro={})),function(n){(function(n){var t=function(){function n(n,t){this.path=n;this.asc=t}return n}();n.SortDescriptor=t})(n.TGrid||(n.TGrid={}));var t=n.TGrid}(TesserisPro||(TesserisPro={})),function(n){(function(n){var t=function(){function t(t,i,r){var e=this,o,u,f,s;for(this.isPreloadingNext=!1,this.isPreloadingPrevious=!1,this.enablePreload=!0,t.grid=this,this.targetElement=t,this.options=i,this.footerViewModel=new n.FooterViewModel(0,null,this.options.currentPage,0),this.collapsedFilterGroup=[],o=0;o<this.options.columns.length;o++)this.collapsedFilterGroup.push([]);this.itemProvider=r;this.htmlProvider=this.getHtmlProvider(this.options);this.rootElement=document.createElement("div");this.rootElement.className="tgrid-root";this.groupByElement=document.createElement("div");this.groupByElement.setAttribute("class","group-by-container");this.rootElement.appendChild(this.groupByElement);this.headerContainer=document.createElement("div");this.headerContainer.className="tgrid-tableheadercontainer desktop";u=document.createElement("table");u.className="tgrid-table";this.headerContainer.appendChild(u);this.options.isEnableFiltering&&(this.filterPopUp=document.createElement("div"),this.filterPopUp.setAttribute("class","tgrid-filter-popup"),this.rootElement.appendChild(this.filterPopUp));this.mobileHeader=document.createElement("div");this.mobileHeader.setAttribute("class","tgrid-mobile-header mobile");this.rootElement.appendChild(this.mobileHeader);this.tableHeader=document.createElement("thead");this.tableHeader.setAttribute("class","tgrid-table-header desktop");u.appendChild(this.tableHeader);this.rootElement.appendChild(this.headerContainer);this.tableBodyContainer=document.createElement("div");this.tableBodyContainer.className="tgrid-tablebodycontainer desktop";i.isEnableVirtualScroll?this.tableBodyContainer.onscroll=function(){return e.scrollTable()}:this.itemProvider.getTotalItemsCount(i.filterDescriptors,function(n){e.options.firstLoadSize=n});f=document.createElement("table");f.className="tgrid-table";this.tableBodyContainer.appendChild(f);this.tableBody=document.createElement("tbody");f.appendChild(this.tableBody);this.rootElement.appendChild(this.tableBodyContainer);this.mobileContainer=document.createElement("div");this.mobileContainer.setAttribute("class","tgrid-mobile-container mobile");this.rootElement.appendChild(this.mobileContainer);this.tableFooter=document.createElement("div");this.tableFooter.setAttribute("class","tgrid-footer");this.rootElement.appendChild(this.tableFooter);i.isEnableVirtualScroll&&(this.buisyIndicator=document.createElement("div"),this.buisyIndicator.className="tgrid-buisy-indicator",this.rootElement.appendChild(this.buisyIndicator),this.scrollBar=document.createElement("div"),this.scrollBar.className="tgrid-scroll",s=document.createElement("div"),s.style.height="1000px",this.scrollBar.appendChild(s),this.rootElement.appendChild(this.scrollBar),this.scrollBar.onmouseup=function(){return e.onManualScroll()});this.targetElement.appendChild(this.rootElement);this.tableBodyContainer.scrollTop=0;this.options.groupBySortDescriptor.length>0?(this.refreshHeader(),this.refreshBody(i.isEnableVirtualScroll)):this.sortBy(this.options.sortDescriptor.path)}return t.getGridObject=function(n){return n.grid==undefined||n.grid==null?n.parentElement==document.body?null:t.getGridObject(n.parentElement):n.grid},t.prototype.getPreviousPageFirsItemIndex=function(){var n=this.firstVisibleItemIndex-this.options.batchSize;return n<0&&(n=0),n},t.prototype.getPreviousPageSize=function(){var n=this.options.batchSize+(this.options.firstLoadSize-this.visibleItems.length),t=this.firstVisibleItemIndex-n;return t<0?n+t:n},t.prototype.getNextPageFirstItemIndex=function(){return this.firstVisibleItemIndex+this.visibleItems.length},t.prototype.getNextPageSize=function(){return this.options.batchSize},t.prototype.getEffectiveSorting=function(){for(var r,i,t=[],u=!1,n=0;n<this.options.groupBySortDescriptor.length;n++){for(r=!1,i=0;i<t.length;i++)if(this.options.sortDescriptor.path==this.options.groupBySortDescriptor[n].path&&(u=!0),t[i].path==this.options.groupBySortDescriptor[n].path){r=!0;break}r||(this.options.groupBySortDescriptor[n].path==this.options.sortDescriptor.path&&(this.options.groupBySortDescriptor[n].asc=this.options.sortDescriptor.asc),t.push(this.options.groupBySortDescriptor[n]))}return u||t.push(this.options.sortDescriptor),t},t.prototype.getEffectiveFiltering=function(){var n=[];return(this.options.filterDescriptors!=null||this.options.filterDescriptors.length>0)&&(n=n.concat(this.options.filterDescriptors)),n},t.prototype.getCollapsedGroupFilter=function(){for(var t=[],n=0;n<this.collapsedFilterGroup.length;n++)(this.collapsedFilterGroup[n]!=null||this.collapsedFilterGroup[n].length>0)&&(t=t.concat(this.collapsedFilterGroup[n]));return t},t.prototype.scrollTable=function(){!this.isPreloadingNext&&this.enablePreload&&this.tableBodyContainer.scrollTop>(this.tableBodyContainer.scrollHeight-this.tableBodyContainer.clientHeight)/4*3&&this.nextPage==null&&this.preloadNextPage();!this.isPreloadingPrevious&&this.enablePreload&&this.tableBodyContainer.scrollTop<(this.tableBodyContainer.scrollHeight-this.tableBodyContainer.clientHeight)/4&&this.previousPage==null&&this.preloadPreviousPage();this.totalItemsCount>this.firstVisibleItemIndex+this.visibleItems.length&&this.tableBodyContainer.scrollTop+this.tableBodyContainer.clientHeight>=this.tableBodyContainer.scrollHeight&&this.showNextPage();this.firstVisibleItemIndex>0&&this.tableBodyContainer.scrollTop==0&&this.showPreviousPage();this.updateGlobalScroll()},t.prototype.updateGlobalScroll=function(){for(var i,r=this.htmlProvider.getFirstVisibleItem(this.tableBody,this.visibleViewModels,this.tableBodyContainer.scrollTop),t=this.firstVisibleItemIndex,n=0;n<this.visibleItems.length;n++)if(r.item==this.visibleItems[n]){t=this.firstVisibleItemIndex+n;break}i=1e3/this.totalItemsCount*t;this.scrollBar.scrollTop=i},t.prototype.onManualScroll=function(){var n=this,t=1e3/this.totalItemsCount,i=this.scrollBar.scrollTop/t;this.showBuisyIndicator();this.previousPage=null;this.nextPage=null;this.itemProvider.getItems(i,this.options.firstLoadSize,this.getEffectiveSorting(),this.getEffectiveFiltering(),this.getCollapsedGroupFilter(),function(t,i){n.tableBodyContainer.scrollTop=1;n.firstVisibleItemIndex=i;n.visibleItems=t;n.visibleViewModels=n.buildViewModels(n.visibleItems);n.updateVisibleItems();n.hideBuisyIndicator()})},t.prototype.preloadPreviousPage=function(){var n=this,t=this.getPreviousPageSize();t>0&&(this.isPreloadingPrevious=!0,this.itemProvider.getItems(this.getPreviousPageFirsItemIndex(),t,this.getEffectiveSorting(),this.getEffectiveFiltering(),this.getCollapsedGroupFilter(),function(t){n.previousPage=t;n.isPreloadingPrevious=!1}))},t.prototype.preloadNextPage=function(){var n=this;this.isPreloadingNext=!0;this.itemProvider.getItems(this.getNextPageFirstItemIndex(),this.getNextPageSize(),this.getEffectiveSorting(),this.getEffectiveFiltering(),this.getCollapsedGroupFilter(),function(t){n.nextPage=t;n.isPreloadingNext=!1})},t.prototype.showPreviousPage=function(){var n=this,t;this.previousPage==null?(this.showBuisyIndicator(),this.isPreloadingPrevious||this.preloadNextPage(),setTimeout(function(){n.showPreviousPage()},100)):this.previousPage!=null&&this.previousPage.length>0&&(this.hideBuisyIndicator(),this.enablePreload=!1,this.visibleItems.splice(this.visibleItems.length-this.options.batchSize,this.options.batchSize),this.firstVisibleItemIndex-=this.options.batchSize,this.firstVisibleItemIndex<0&&(this.firstVisibleItemIndex=0),t=this.previousPage[this.previousPage.length-1],this.visibleItems=this.previousPage.concat(this.visibleItems),this.visibleViewModels=this.buildViewModels(this.visibleItems),this.updateVisibleItems(),setTimeout(function(){for(var u,r=[],i=0;i<n.visibleViewModels.length;i++)if(r.push(n.visibleViewModels[i]),n.visibleViewModels[i].item==t)break;u=n.htmlProvider.getElemntsSize(n.tableBody,r);n.tableBodyContainer.scrollTop=u;n.previousPage=null;n.nextPage=null;n.enablePreload=!0},1))},t.prototype.showNextPage=function(){var n=this,t;this.nextPage==null?(this.showBuisyIndicator(),this.isPreloadingNext||this.preloadNextPage(),setTimeout(function(){n.showNextPage()},100)):this.nextPage!=null&&this.nextPage.length>0&&(this.hideBuisyIndicator(),this.enablePreload=!1,this.visibleItems.splice(0,this.options.batchSize),this.firstVisibleItemIndex+=this.options.batchSize,t=this.nextPage[0],this.visibleItems=this.visibleItems.concat(this.nextPage),this.visibleViewModels=this.buildViewModels(this.visibleItems),this.updateVisibleItems(),setTimeout(function(){for(var u,r=[],i=0;i<n.visibleViewModels.length;i++)if(r.push(n.visibleViewModels[i]),n.visibleViewModels[i].item==t)break;u=n.htmlProvider.getElemntsSize(n.tableBody,r);n.tableBodyContainer.scrollTop=u-n.tableBodyContainer.clientHeight;n.nextPage=null;n.previousPage=null;n.enablePreload=!0},1))},t.prototype.addGroupBy=function(t,i){this.options.groupBySortDescriptor.push(new n.SortDescriptor(t,i));this.refreshHeader();this.refreshBody()},t.prototype.deleteGroupBy=function(n){for(var t=0;t<this.options.groupBySortDescriptor.length;t++)this.options.groupBySortDescriptor[t].path==n&&this.options.groupBySortDescriptor.splice(t,1);this.refreshHeader();this.refreshBody()},t.prototype.showHideListOnClick=function(n){n.getAttribute("style")!="display:block;"?n.setAttribute("style","display:block;"):n.removeAttribute("style")},t.prototype.showDivElement=function(n){n.setAttribute("style","display:block;")},t.prototype.showTableCellElement=function(n){n.setAttribute("style","display:table-cell;")},t.prototype.hideElement=function(n){n.removeAttribute("style")},t.prototype.showFilterBox=function(n,t,i){n.setAttribute("style","display:block;left:"+i+"px;top:62px");this.options.filterPath=t},t.prototype.addFilter=function(t,i,r,u){this.clearFilter(t,u,!1);this.options.filterDescriptors.push(new n.FilterDescriptor(t,i,r));this.refreshBody();this.hideElement(u)},t.prototype.clearFilter=function(n,t,i){typeof i=="undefined"&&(i=!0);for(var r=0;r<this.options.filterDescriptors.length;r++)this.options.filterDescriptors[r].path==n&&this.options.filterDescriptors.splice(r,1);i&&this.refreshBody();this.hideElement(t)},t.prototype.sortBy=function(n){n==this.options.sortDescriptor.path?this.options.sortDescriptor.asc=!this.options.sortDescriptor.asc:(this.options.sortDescriptor.path=n,this.options.sortDescriptor.asc=!1);this.refreshHeader();this.refreshBody()},t.prototype.selectPage=function(n){this.options.currentPage=n;this.refreshHeader();this.refreshBody()},t.prototype.selectItem=function(t,i){if(this.options.selectionMode==n.SelectionMode.Multi)if(i){for(var r=0;r<this.options.selection.length;r++)if(t.item==this.options.selection[r])return this.options.selection.splice(r,1),this.refreshBody(),!1;this.options.selection.push(t.item)}else this.options.selection=[t.item];else this.options.selection=this.options.selectionMode==n.SelectionMode.Single?[t.item]:null;return this.options.selection.length==1&&(this.options.showDetailFor.item=this.options.selection[0]),this.htmlProvider.updateTableDetailRow(this.options,this.tableBodyContainer.getElementsByTagName("tbody")[0],this.options.showDetailFor.item),this.htmlProvider.updateMobileDetailRow(this.options,this.mobileContainer,this.options.showDetailFor.item),this.footerViewModel.selectedItem=t.item,!0},t.prototype.buildViewModels=function(t){for(var f,e,h,o,r,s=[],u=[],c=[],i=0;i<this.options.groupBySortDescriptor.length;i++)u.push(""),c.push(!1);for(f=0;f<t.length;f++){for(e=!1,i=0;i<this.options.groupBySortDescriptor.length;i++)if(h=getMemberValue(t[f],this.options.groupBySortDescriptor[i].path),u[i]!==h){for(u[i]=h,o=new n.FilterDescriptor(this.options.groupBySortDescriptor[0].path,u[0],n.FilterCondition.NotEquals),r=1;r<=i;r++)o.children.push(new n.FilterDescriptor(this.options.groupBySortDescriptor[r].path,u[r],n.FilterCondition.NotEquals));for(e=this.isFilterInCollapsed(o),s.push(new n.ItemViewModel(null,new n.GroupHeaderDescriptor(u[i],i,e,o),this,!0)),r=i+1;r<this.options.groupBySortDescriptor.length;r++)u[r]="";e&&(i=this.options.groupBySortDescriptor.length)}e||s.push(new n.ItemViewModel(null,t[f],this,!1))}return s},t.prototype.isFiltersEquals=function(n,t){var r,i;if(n.path==t.path&&n.value==t.value&&n.children.length<=t.children.length){for(r=0,i=0;i<n.children.length;i++)n.children[i].path==t.children[i].path&&n.children[i].value==t.children[i].value&&r++;if(r==n.children.length)return!0}return!1},t.prototype.isFilterInCollapsed=function(n){for(var t=0;t<this.collapsedFilterGroup[n.children.length].length;t++)if(this.isFiltersEquals(n,this.collapsedFilterGroup[n.children.length][t]))return!0;return!1},t.prototype.filterDescriptorToArray=function(t){var i=[];return i=i.concat(t.children),i.push(new n.FilterDescriptor(t.path,t.value,t.condition)),i},t.prototype.updateVisibleItems=function(){var n=this;setTimeout(function(){n.tableBody.innerHTML="";n.htmlProvider.updateTableBodyElement(n.options,n.tableBody,n.visibleViewModels,function(t,i){return n.selectItem(t,i)})},1);setTimeout(function(){n.mobileContainer.innerHTML="";n.htmlProvider.updateMobileItemsList(n.options,n.mobileContainer,n.visibleViewModels,function(t,i){return n.selectItem(t,i)})},1)},t.prototype.getHtmlProvider=function(t){return t.framework==n.Framework.Knockout?new n.KnockoutHtmlProvider:t.framework==n.Framework.Angular?new n.AngularHtmlProvider:void 0},t.prototype.getFirstItemNumber=function(){return this.options.pageSize*this.options.currentPage},t.prototype.getPageSize=function(){return this.options.pageSize},t.prototype.getFooter=function(t,i){var r=1;return this.options.pageSize!=0&&(r=Math.ceil(t/this.options.pageSize)),this.footerViewModel=new n.FooterViewModel(t,i,this.options.currentPage,r),this.footerViewModel},t.prototype.getFilterPopupViewModel=function(t){return this.filterPopupViewModel=new n.FilterPopupViewModel(t),this.filterPopupViewModel},t.prototype.refreshHeader=function(){this.htmlProvider.updateTableHeadElement(this.options,this.tableHeader,this.groupByElement,this.filterPopUp,this.itemProvider.isSortable());this.htmlProvider.updateMobileHeadElement(this.options,this.mobileHeader,this.itemProvider.isSortable());this.filterPopupViewModel==null&&function(n){setTimeout(function(){n.htmlProvider.addFiltringPopUp(n.options,n.filterPopUp,n.getFilterPopupViewModel(n.filterPopUp))},1)}(this)},t.prototype.refreshBody=function(n){typeof n=="undefined"&&(n=!1);var t=this;n&&this.showBuisyIndicator();this.options.isEnablePaging?this.itemProvider.getTotalItemsCount(this.getEffectiveFiltering(),function(i){t.itemProvider.getItems(t.getFirstItemNumber(),t.getPageSize(),t.getEffectiveSorting(),t.getEffectiveFiltering(),t.getCollapsedGroupFilter(),function(r,u){t.firstVisibleItemIndex=u;t.visibleItems=r;t.visibleViewModels=t.buildViewModels(t.visibleItems);t.updateVisibleItems();n&&t.hideBuisyIndicator();t.totalItemsCount=i;t.footerViewModel=t.options.tableFooterTemplate!=null?t.getFooter(t.totalItemsCount,t.buildViewModels([t.visibleItems[t.firstVisibleItemIndex]])[0]):null;t.htmlProvider.updateTableFooterElement(t.options,t.tableFooter,t.totalItemsCount,t.footerViewModel)})}):this.itemProvider.getTotalItemsCount(this.getEffectiveFiltering(),function(i){t.totalItemsCount=i;t.itemProvider.getItems(t.getFirstItemNumber(),t.options.firstLoadSize,t.getEffectiveSorting(),t.getEffectiveFiltering(),t.getCollapsedGroupFilter(),function(i,r){t.firstVisibleItemIndex=r;t.visibleItems=i;t.visibleViewModels=t.buildViewModels(t.visibleItems);t.updateVisibleItems();n&&t.hideBuisyIndicator();t.footerViewModel=t.options.tableFooterTemplate!=null?t.getFooter(t.totalItemsCount,t.options.selection[0]):null;t.htmlProvider.updateTableFooterElement(t.options,t.tableFooter,t.totalItemsCount,t.footerViewModel)})})},t.prototype.showBuisyIndicator=function(){this.buisyIndicator.removeAttribute("style")},t.prototype.hideBuisyIndicator=function(){this.buisyIndicator.setAttribute("style","display: none;")},t.prototype.setCollapsedFilters=function(n){this.collapsedFilterGroup[n.children.length].push(n);this.refreshBody()},t.prototype.removeCollapsedFilters=function(n){for(var t=0;t<this.collapsedFilterGroup[n.children.length].length;t++)this.isFiltersEquals(this.collapsedFilterGroup[n.children.length][t],n)&&this.collapsedFilterGroup[n.children.length].splice(t,1);this.refreshBody()},t.prototype.setFilters=function(n){this.options.filterDescriptors.push(n);this.refreshBody()},t.prototype.removeFilters=function(n){for(var t=0;t<this.options.filterDescriptors.length;t++)this.isFiltersEquals(this.options.filterDescriptors[t],n)&&this.options.filterDescriptors.splice(t,1);this.refreshBody()},t}();n.Grid=t})(n.TGrid||(n.TGrid={}));var t=n.TGrid}(TesserisPro||(TesserisPro={}))